use neon::prelude::*;
use once_cell::sync::OnceCell;
use tokio::runtime::Runtime;

pub fn scheduler<'a, C: Context<'a>>(cx: &mut C) -> NeonResult<&'static Runtime> {
    static RUNTIME: OnceCell<Runtime> = OnceCell::new();
    RUNTIME
        .get_or_try_init(|| Runtime::new())
        .or_else(|err| cx.throw_error(err.to_string()))
}
