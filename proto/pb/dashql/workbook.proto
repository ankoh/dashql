syntax = "proto3";

import "dashql/connection.proto";
import "salesforce/hyperdb/grpc/v1/hyper_service.proto";

package dashql;


message WorkbookEntry {
    /// The script id
    uint32 script_id = 1;
    /// The title
    string title = 2;
}

message WorkbookScriptAnnotations {
    /// The table references
    repeated string table_refs = 1;
    /// The table definitions
    repeated string table_defs = 2;
    /// The restricted columns
    repeated string restricted_columns = 3;
}

message WorkbookScript {
    /// The script id
    uint32 script_id = 1;
    /// The script text
    string script_text = 2;
    /// The script annotations
    WorkbookScriptAnnotations annotations = 3;
}

enum WorkbookOriginType {
    FILE = 0;
    LOCAL = 1;
    HTTP = 2;
}

message WorkbookMetadata {
    /// The origin type
    WorkbookOriginType origin_type = 1;
    /// The original file name
    string original_file_name = 2;
    /// The original http url
    string original_http_url = 3;
}

message Workbook {
    /// The connection params (if any)
    ConnectionParams connection_params = 1;
    /// The scripts
    repeated WorkbookScript scripts = 2;
    /// The workbook entries
    repeated WorkbookEntry workbook_entries = 3;
    /// The workbook metadata
    WorkbookMetadata workbook_metadata = 4;
}
