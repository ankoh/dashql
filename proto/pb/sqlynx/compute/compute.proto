syntax = "proto3";

package sqlynx.compute;

message OrderByConfig {
    /// The field name
    string field_name = 1;
    /// Sort ascending?
    bool ascending = 2;
    /// Sort nulls first?
    bool nulls_first = 3;
    /// Limit results?
    bool limit = 4;
}

enum AggregationFunction {
    Min = 0;
    Max = 1;
    Average = 2;
    Count = 3;
    CountStar = 4;
    CountDistinct = 5;
}

message FieldKey {
    /// The field name
    string field_name = 1;
    /// The output alias
    string output_alias = 2;
}

message FieldAggregation {
    /// The field name
    string field_name = 1;
    /// The output alias
    string output_alias = 2;
    /// The aggregation function
    AggregationFunction aggregation_function = 3;
    /// Instead of aggregating the value, we're aggregating the value lengths (list & string)
    bool aggregate_lengths = 4;
}

message GroupByConfig {
    /// The group by keys
    repeated FieldKey keys = 1;
    /// The aggregates
    repeated FieldAggregation aggregates = 2;
}
