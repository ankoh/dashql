analyzer-snapshots:

  - name: filter_variable
    script:
      input: select * from foo where a < 3
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/unresolved
          statement-id: 0
          text: "foo"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: literal/integer
          is-const: true
          statement-id: 0
          text: "3"
        - expression-idx: 2
          type: comparison
          op: LESS_THAN
          arg-left: 0
          arg-right: 1
          restriction-target: 0
          statement-id: 0
          text: "a < 3"
      constants:
        - expression: 1
          text: "3"
      column-filters:
        - expression: 2
          snippet:
            signature-template: 1794443991550492122
            signature-raw: 3130651984596412333
            text: a < 3
            ast:
              ast-nodes: 7
              ast-bytes: 168
              ast:
                type: OBJECT_SQL_NARY_EXPRESSION
                text: "a < 3"
                children:
                  - key: SQL_EXPRESSION_OPERATOR
                    type: ENUM_SQL_EXPRESSION_OPERATOR
                    value: LESS_THAN
                  - key: SQL_EXPRESSION_ARGS
                    type: ARRAY
                    text: "a < 3"
                    children:
                      - type: OBJECT_SQL_COLUMN_REF
                        text: "a"
                        children:
                          - key: SQL_COLUMN_REF_PATH
                            type: ARRAY
                            text: "a"
                            children:
                              - type: NAME
                                text: "a"
                      - type: LITERAL_INTEGER
                        text: "3"

  - name: filter_time
    script:
      input: select * from foo where event_timestamp > current_timestamp - interval '30 days'
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/unresolved
          statement-id: 0
          text: "foo"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 0
          text: "event_timestamp"
        - expression-idx: 1
          type: function
          known-function: CURRENT_TIMESTAMP
          is-const: true
          statement-id: 0
          text: "current_timestamp"
        - expression-idx: 2
          type: literal/string
          is-const: true
          statement-id: 0
          text: "'30 days'"
        - expression-idx: 3
          type: constcast/interval
          is-const: true
          statement-id: 0
          text: "interval '30 days'"
        - expression-idx: 4
          type: binary
          op: MINUS
          arg-left: 1
          arg-right: 3
          is-const: true
          statement-id: 0
          text: "current_ti.. '30 days'"
        - expression-idx: 5
          type: comparison
          op: GREATER_THAN
          arg-left: 0
          arg-right: 4
          restriction-target: 0
          statement-id: 0
          text: "event_time.. '30 days'"
      constants:
        - expression: 3
          text: "interval '30 days'"
          snippet:
            signature-template: 46082571324905491
            signature-raw: 3005809175370113497
            text: interval '30 days'
            ast:
              ast-nodes: 2
              ast-bytes: 48
              ast:
                type: OBJECT_SQL_CONST_INTERVAL_CAST
                text: "interval '30 days'"
                children:
                  - key: SQL_CONST_CAST_VALUE
                    type: LITERAL_STRING
                    text: "'30 days'"
        - expression: 4
          text: "current_ti.. '30 days'"
          snippet:
            signature-template: 11044524866165889543
            signature-raw: 13280692735104873070
            text: current_timestamp - interval '30 days'
            ast:
              ast-nodes: 7
              ast-bytes: 168
              ast:
                type: OBJECT_SQL_NARY_EXPRESSION
                text: "current_ti.. '30 days'"
                children:
                  - key: SQL_EXPRESSION_OPERATOR
                    type: ENUM_SQL_EXPRESSION_OPERATOR
                    value: MINUS
                  - key: SQL_EXPRESSION_ARGS
                    type: ARRAY
                    text: "current_ti.. '30 days'"
                    children:
                      - type: OBJECT_SQL_FUNCTION_EXPRESSION
                        text: "current_timestamp"
                        children:
                          - key: SQL_FUNCTION_NAME
                            type: ENUM_SQL_KNOWN_FUNCTION
                            value: CURRENT_TIMESTAMP
                      - type: OBJECT_SQL_CONST_INTERVAL_CAST
                        text: "interval '30 days'"
                        children:
                          - key: SQL_CONST_CAST_VALUE
                            type: LITERAL_STRING
                            text: "'30 days'"
      column-filters:
        - expression: 5
          snippet:
            signature-template: 11137086844753160654
            signature-raw: 12336746105079655642
            text: event_timestamp > current_timestamp - interval '30 days'
            ast:
              ast-nodes: 13
              ast-bytes: 312
              ast:
                type: OBJECT_SQL_NARY_EXPRESSION
                text: "event_time.. '30 days'"
                children:
                  - key: SQL_EXPRESSION_OPERATOR
                    type: ENUM_SQL_EXPRESSION_OPERATOR
                    value: GREATER_THAN
                  - key: SQL_EXPRESSION_ARGS
                    type: ARRAY
                    text: "event_time.. '30 days'"
                    children:
                      - type: OBJECT_SQL_COLUMN_REF
                        text: "event_timestamp"
                        children:
                          - key: SQL_COLUMN_REF_PATH
                            type: ARRAY
                            text: "event_timestamp"
                            children:
                              - type: NAME
                                text: "event_timestamp"
                      - type: OBJECT_SQL_NARY_EXPRESSION
                        text: "current_ti.. '30 days'"
                        children:
                          - key: SQL_EXPRESSION_OPERATOR
                            type: ENUM_SQL_EXPRESSION_OPERATOR
                            value: MINUS
                          - key: SQL_EXPRESSION_ARGS
                            type: ARRAY
                            text: "current_ti.. '30 days'"
                            children:
                              - type: OBJECT_SQL_FUNCTION_EXPRESSION
                                text: "current_timestamp"
                                children:
                                  - key: SQL_FUNCTION_NAME
                                    type: ENUM_SQL_KNOWN_FUNCTION
                                    value: CURRENT_TIMESTAMP
                              - type: OBJECT_SQL_CONST_INTERVAL_CAST
                                text: "interval '30 days'"
                                children:
                                  - key: SQL_CONST_CAST_VALUE
                                    type: LITERAL_STRING
                                    text: "'30 days'"

  - name: filter_time_minus_interval
    script:
      input: select * from foo where event_timestamp > current_timestamp - interval '30 days'
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/unresolved
          statement-id: 0
          text: "foo"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 0
          text: "event_timestamp"
        - expression-idx: 1
          type: function
          known-function: CURRENT_TIMESTAMP
          is-const: true
          statement-id: 0
          text: "current_timestamp"
        - expression-idx: 2
          type: literal/string
          is-const: true
          statement-id: 0
          text: "'30 days'"
        - expression-idx: 3
          type: constcast/interval
          is-const: true
          statement-id: 0
          text: "interval '30 days'"
        - expression-idx: 4
          type: binary
          op: MINUS
          arg-left: 1
          arg-right: 3
          is-const: true
          statement-id: 0
          text: "current_ti.. '30 days'"
        - expression-idx: 5
          type: comparison
          op: GREATER_THAN
          arg-left: 0
          arg-right: 4
          restriction-target: 0
          statement-id: 0
          text: "event_time.. '30 days'"
      constants:
        - expression: 3
          text: "interval '30 days'"
          snippet:
            signature-template: 46082571324905491
            signature-raw: 3005809175370113497
            text: interval '30 days'
            ast:
              ast-nodes: 2
              ast-bytes: 48
              ast:
                type: OBJECT_SQL_CONST_INTERVAL_CAST
                text: "interval '30 days'"
                children:
                  - key: SQL_CONST_CAST_VALUE
                    type: LITERAL_STRING
                    text: "'30 days'"
        - expression: 4
          text: "current_ti.. '30 days'"
          snippet:
            signature-template: 11044524866165889543
            signature-raw: 13280692735104873070
            text: current_timestamp - interval '30 days'
            ast:
              ast-nodes: 7
              ast-bytes: 168
              ast:
                type: OBJECT_SQL_NARY_EXPRESSION
                text: "current_ti.. '30 days'"
                children:
                  - key: SQL_EXPRESSION_OPERATOR
                    type: ENUM_SQL_EXPRESSION_OPERATOR
                    value: MINUS
                  - key: SQL_EXPRESSION_ARGS
                    type: ARRAY
                    text: "current_ti.. '30 days'"
                    children:
                      - type: OBJECT_SQL_FUNCTION_EXPRESSION
                        text: "current_timestamp"
                        children:
                          - key: SQL_FUNCTION_NAME
                            type: ENUM_SQL_KNOWN_FUNCTION
                            value: CURRENT_TIMESTAMP
                      - type: OBJECT_SQL_CONST_INTERVAL_CAST
                        text: "interval '30 days'"
                        children:
                          - key: SQL_CONST_CAST_VALUE
                            type: LITERAL_STRING
                            text: "'30 days'"
      column-filters:
        - expression: 5
          snippet:
            signature-template: 11137086844753160654
            signature-raw: 12336746105079655642
            text: event_timestamp > current_timestamp - interval '30 days'
            ast:
              ast-nodes: 13
              ast-bytes: 312
              ast:
                type: OBJECT_SQL_NARY_EXPRESSION
                text: "event_time.. '30 days'"
                children:
                  - key: SQL_EXPRESSION_OPERATOR
                    type: ENUM_SQL_EXPRESSION_OPERATOR
                    value: GREATER_THAN
                  - key: SQL_EXPRESSION_ARGS
                    type: ARRAY
                    text: "event_time.. '30 days'"
                    children:
                      - type: OBJECT_SQL_COLUMN_REF
                        text: "event_timestamp"
                        children:
                          - key: SQL_COLUMN_REF_PATH
                            type: ARRAY
                            text: "event_timestamp"
                            children:
                              - type: NAME
                                text: "event_timestamp"
                      - type: OBJECT_SQL_NARY_EXPRESSION
                        text: "current_ti.. '30 days'"
                        children:
                          - key: SQL_EXPRESSION_OPERATOR
                            type: ENUM_SQL_EXPRESSION_OPERATOR
                            value: MINUS
                          - key: SQL_EXPRESSION_ARGS
                            type: ARRAY
                            text: "current_ti.. '30 days'"
                            children:
                              - type: OBJECT_SQL_FUNCTION_EXPRESSION
                                text: "current_timestamp"
                                children:
                                  - key: SQL_FUNCTION_NAME
                                    type: ENUM_SQL_KNOWN_FUNCTION
                                    value: CURRENT_TIMESTAMP
                              - type: OBJECT_SQL_CONST_INTERVAL_CAST
                                text: "interval '30 days'"
                                children:
                                  - key: SQL_CONST_CAST_VALUE
                                    type: LITERAL_STRING
                                    text: "'30 days'"
