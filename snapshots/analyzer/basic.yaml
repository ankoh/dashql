analyzer-snapshots:

  - name: empty
    script:
      input: ''
      catalog-id: 0
      errors: []

  - name: refs_0
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A, B where a = b;
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/catalog
          catalog: "256.65536.4294967296.1"
          statement-id: 0
          text: "b"

  - name: edges_0
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A, B where a + d = e;
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/catalog
          catalog: "256.65536.4294967297.0"
          statement-id: 0
          text: "d"
        - expression-idx: 2
          type: colref/catalog
          catalog: "256.65536.4294967297.1"
          statement-id: 0
          text: "e"

  - name: edges_1
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A, B where a = d and b = e;
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/catalog
          catalog: "256.65536.4294967297.0"
          statement-id: 0
          text: "d"
        - expression-idx: 2
          type: colref/catalog
          catalog: "256.65536.4294967296.1"
          statement-id: 0
          text: "b"
        - expression-idx: 3
          type: colref/catalog
          catalog: "256.65536.4294967297.1"
          statement-id: 0
          text: "e"

  - name: edges_2
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A, B where (a = d and b = e) or (a = d and d = 42);
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/catalog
          catalog: "256.65536.4294967297.0"
          statement-id: 0
          text: "d"
        - expression-idx: 2
          type: colref/catalog
          catalog: "256.65536.4294967296.1"
          statement-id: 0
          text: "b"
        - expression-idx: 3
          type: colref/catalog
          catalog: "256.65536.4294967297.1"
          statement-id: 0
          text: "e"
        - expression-idx: 4
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 5
          type: colref/catalog
          catalog: "256.65536.4294967297.0"
          statement-id: 0
          text: "d"
        - expression-idx: 6
          type: colref/catalog
          catalog: "256.65536.4294967297.0"
          statement-id: 0
          text: "d"
        - expression-idx: 7
          type: literal/integer
          is-const: true
          statement-id: 0
          text: "42"
        - expression-idx: 8
          type: comparison
          op: EQUAL
          arg-left: 6
          arg-right: 7
          restriction-target: 6
          statement-id: 0
          text: "d = 42"
      constants:
        - expression: 7
          text: "42"
      column-filters:
        - expression: 8
          snippet:
            signature-template: 1794172684583478586
            signature-raw: 16768430420018425835
            text: d = 42
            nodes:
              count: 7
              bytes: 168
              node:
                type: OBJECT_SQL_NARY_EXPRESSION
                text: "d = 42"
                nodes:
                  - key: SQL_EXPRESSION_OPERATOR
                    type: ENUM_SQL_EXPRESSION_OPERATOR
                    value: EQUAL
                  - key: SQL_EXPRESSION_ARGS
                    type: ARRAY
                    text: "d = 42"
                    nodes:
                      - type: OBJECT_SQL_COLUMN_REF
                        text: "d"
                        nodes:
                          - key: SQL_COLUMN_REF_PATH
                            type: ARRAY
                            text: "d"
                            nodes:
                              - type: NAME
                                text: "d"
                      - type: LITERAL_INTEGER
                        text: "42"

  - name: edges_3
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A, B where a = (d + 42);
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967297.0"
          statement-id: 0
          text: "d"
        - expression-idx: 1
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 2
          type: literal/integer
          is-const: true
          statement-id: 0
          text: "42"
        - expression-idx: 3
          type: binary
          op: PLUS
          arg-left: 0
          arg-right: 2
          computation: 0
          statement-id: 0
          text: "d + 42"
      constants:
        - expression: 2
          text: "42"
      column-computations:
        - expression: 3
          snippet:
            signature-template: 2290193904433761446
            signature-raw: 18345785965285989689
            text: d + 42
            nodes:
              count: 7
              bytes: 168
              node:
                type: OBJECT_SQL_NARY_EXPRESSION
                text: "d + 42"
                nodes:
                  - key: SQL_EXPRESSION_OPERATOR
                    type: ENUM_SQL_EXPRESSION_OPERATOR
                    value: PLUS
                  - key: SQL_EXPRESSION_ARGS
                    type: ARRAY
                    text: "d + 42"
                    nodes:
                      - type: OBJECT_SQL_COLUMN_REF
                        text: "d"
                        nodes:
                          - key: SQL_COLUMN_REF_PATH
                            type: ARRAY
                            text: "d"
                            nodes:
                              - type: NAME
                                text: "d"
                      - type: LITERAL_INTEGER
                        text: "42"

  - name: edges_4
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A join B on (a = b);
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/catalog
          catalog: "256.65536.4294967296.1"
          statement-id: 0
          text: "b"

  - name: unresolved_0
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A, C where a = c;
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/unresolved
          statement-id: 0
          text: "C"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/unresolved
          statement-id: 0
          text: "c"

  - name: unresolved_1
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A, B where a = c;
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/unresolved
          statement-id: 0
          text: "c"

  - name: unresolved_2
    catalog:
      script:
        input: ''
        catalog-id: 1
        errors: []
    script:
      input: select * from A;
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/unresolved
          statement-id: 0
          text: "A"

  - name: unresolved_3
    catalog:
      script:
        input: ''
        catalog-id: 1
        errors: []
    script:
      input: select * from A, B where c = d;
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/unresolved
          statement-id: 0
          text: "A"
        - type: name/unresolved
          statement-id: 0
          text: "B"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 0
          text: "c"
        - expression-idx: 1
          type: colref/unresolved
          statement-id: 0
          text: "d"

  - name: nesting_1
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A where not exists (select * from B where a = d);
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/catalog
          catalog: "256.65536.4294967297.0"
          statement-id: 0
          text: "d"

  - name: nesting_2
    catalog:
      script:
        input: |-
          create table A (a int, b int);
          create table B (d int, e int);
        catalog-id: 1
        tables:
          - catalog-id: "256.65536.4294967296"
            name: a
            text: "create tab..nt, b int)"
            columns:
              - catalog-id: "256.65536.4294967296.0"
                name: a
                text: "a int"
              - catalog-id: "256.65536.4294967296.1"
                name: b
                text: "b int"
          - catalog-id: "256.65536.4294967297"
            name: b
            text: "create tab..nt, e int)"
            columns:
              - catalog-id: "256.65536.4294967297.0"
                name: d
                text: "d int"
              - catalog-id: "256.65536.4294967297.1"
                name: e
                text: "e int"
        errors: []
    script:
      input: select * from A where not exists (select * from A, B where a = d);
      catalog-id: 0
      errors: []
      table-refs:
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
        - type: name/catalog
          catalog-id: "256.65536.4294967297"
          statement-id: 0
          text: "B"
        - type: name/catalog
          catalog-id: "256.65536.4294967296"
          statement-id: 0
          text: "A"
      expressions:
        - expression-idx: 0
          type: colref/catalog
          catalog: "256.65536.4294967296.0"
          statement-id: 0
          text: "a"
        - expression-idx: 1
          type: colref/catalog
          catalog: "256.65536.4294967297.0"
          statement-id: 0
          text: "d"
