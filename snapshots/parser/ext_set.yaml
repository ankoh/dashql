parser-snapshots:

  - name: set_1
    input: |-
      SET variable = 'value';
    expected:
      statements:
        - type: SET
          ast-begin: 0
          ast-size: 4
          ast:
            type: OBJECT_EXT_SET
            text: "SET variab.. = 'value'"
            children:
              - key: EXT_SET_VARARGS
                type: OBJECT_EXT_VARARG_FIELD
                text: "variable = 'value'"
                children:
                  - key: EXT_VARARG_FIELD_KEY
                    type: NAME
                    text: "variable"
                  - key: EXT_VARARG_FIELD_VALUE
                    type: LITERAL_STRING
                    text: "'value'"
      scanner-errors: []
      parser-errors: []
      line-breaks: []
      comments: []

  - name: set_2
    input: |-
      SET variable = (
        'some' = 42,
        'complex' = 'configuration',
        'with' = (
          'nesting' = true
        ),
        'andarrays' = [43, 44]
      );
    expected:
      statements:
        - type: SET
          ast-begin: 0
          ast-size: 22
          ast:
            type: OBJECT_EXT_SET
            text: "SET variab..[43, 44]\n)"
            children:
              - key: EXT_SET_VARARGS
                type: OBJECT_EXT_VARARG_FIELD
                text: "variable =..[43, 44]\n)"
                children:
                  - key: EXT_VARARG_FIELD_KEY
                    type: NAME
                    text: "variable"
                  - key: EXT_VARARG_FIELD_VALUE
                    type: ARRAY
                    text: "(\n  'some'..[43, 44]\n)"
                    children:
                      - type: OBJECT_EXT_VARARG_FIELD
                        text: "'some' = 42"
                        children:
                          - key: EXT_VARARG_FIELD_KEY
                            type: LITERAL_STRING
                            text: "'some'"
                          - key: EXT_VARARG_FIELD_VALUE
                            type: LITERAL_INTEGER
                            text: "42"
                      - type: OBJECT_EXT_VARARG_FIELD
                        text: "'complex' ..iguration'"
                        children:
                          - key: EXT_VARARG_FIELD_KEY
                            type: LITERAL_STRING
                            text: "'complex'"
                          - key: EXT_VARARG_FIELD_VALUE
                            type: LITERAL_STRING
                            text: "'configuration'"
                      - type: OBJECT_EXT_VARARG_FIELD
                        text: "'with' = (..= true\n  )"
                        children:
                          - key: EXT_VARARG_FIELD_KEY
                            type: LITERAL_STRING
                            text: "'with'"
                          - key: EXT_VARARG_FIELD_VALUE
                            type: ARRAY
                            text: "(\n    'nes..= true\n  )"
                            children:
                              - type: OBJECT_EXT_VARARG_FIELD
                                text: "'nesting' = true"
                                children:
                                  - key: EXT_VARARG_FIELD_KEY
                                    type: LITERAL_STRING
                                    text: "'nesting'"
                                  - key: EXT_VARARG_FIELD_VALUE
                                    type: BOOL
                                    value: 1
                      - type: OBJECT_EXT_VARARG_FIELD
                        text: "'andarrays..= [43, 44]"
                        children:
                          - key: EXT_VARARG_FIELD_KEY
                            type: LITERAL_STRING
                            text: "'andarrays'"
                          - key: EXT_VARARG_FIELD_VALUE
                            type: OBJECT_EXT_VARARG_ARRAY
                            text: "[43, 44]"
                            children:
                              - key: EXT_VARARG_ARRAY_VALUES
                                type: ARRAY
                                text: "[43, 44]"
                                children:
                                  - type: LITERAL_INTEGER
                                    text: "43"
                                  - type: LITERAL_INTEGER
                                    text: "44"
      scanner-errors: []
      parser-errors: []
      line-breaks:
        - text: [16,17]
        - text: [31,32]
        - text: [62,63]
        - text: [75,76]
        - text: [96,97]
        - text: [101,102]
        - text: [126,127]
      comments: []

  - name: set_3
    input: |-
      SET variable = (
        'some' = 42,
        'func' = somefunction($someparam),
      );
    expected:
      statements:
        - type: SET
          ast-begin: 0
          ast-size: 17
          ast:
            type: OBJECT_EXT_SET
            text: "SET variab..eparam),\n)"
            children:
              - key: EXT_SET_VARARGS
                type: OBJECT_EXT_VARARG_FIELD
                text: "variable =..eparam),\n)"
                children:
                  - key: EXT_VARARG_FIELD_KEY
                    type: NAME
                    text: "variable"
                  - key: EXT_VARARG_FIELD_VALUE
                    type: ARRAY
                    text: "(\n  'some'..eparam),\n)"
                    children:
                      - type: OBJECT_EXT_VARARG_FIELD
                        text: "'some' = 42"
                        children:
                          - key: EXT_VARARG_FIELD_KEY
                            type: LITERAL_STRING
                            text: "'some'"
                          - key: EXT_VARARG_FIELD_VALUE
                            type: LITERAL_INTEGER
                            text: "42"
                      - type: OBJECT_EXT_VARARG_FIELD
                        text: "'func' = s..someparam)"
                        children:
                          - key: EXT_VARARG_FIELD_KEY
                            type: LITERAL_STRING
                            text: "'func'"
                          - key: EXT_VARARG_FIELD_VALUE
                            type: OBJECT_SQL_FUNCTION_EXPRESSION
                            text: "somefuncti..someparam)"
                            children:
                              - key: SQL_FUNCTION_NAME
                                type: ARRAY
                                text: "somefunction"
                                children:
                                  - type: NAME
                                    text: "somefunction"
                              - key: SQL_FUNCTION_ARGUMENTS
                                type: ARRAY
                                text: "$someparam"
                                children:
                                  - type: OBJECT_SQL_FUNCTION_ARG
                                    text: "$someparam"
                                    children:
                                      - key: SQL_FUNCTION_ARG_VALUE
                                        type: OBJECT_SQL_PARAMETER_REF
                                        text: "$someparam"
                                        children:
                                          - key: SQL_PARAMETER_NAME
                                            type: ARRAY
                                            text: "someparam"
                                            children:
                                              - type: NAME
                                                text: "someparam"
      scanner-errors: []
      parser-errors: []
      line-breaks:
        - text: [16,17]
        - text: [31,32]
        - text: [68,69]
      comments: []
