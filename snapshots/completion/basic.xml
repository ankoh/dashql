<completion-snapshots>
    <!-- Empty editor, no catalog: no completions -->
    <completion-snapshot name="empty">
        <catalog />
        <editor id="0">
            <errors />
        </editor>
        <cursor>
            <search text="" index="0" />
        </cursor>
        <completions limit="3" strategy="DEFAULT" loc="0..1" text="" />
    </completion-snapshot>
    <!-- Complete database name after "from db" -->
    <completion-snapshot name="complete_database_name">
        <catalog>
            <script id="1">
                <input>
                    create table dbname.schemaname.foo(a int);
                </input>
                <tables>
                    <table id="256.65536.4294967296" name="foo" loc="21..62" text="create tab..foo(a int)">
                        <column id="256.65536.4294967296.0" name="a" loc="56..61" text="a int" />
                    </table>
                </tables>
                <errors />
            </script>
        </catalog>
        <editor id="0">
            <input>
                select * from db
            </input>
            <errors />
            <table-refs>
                <table-ref type="name/unresolved" stmt="0" loc="31..33" text="db" />
            </table-refs>
        </editor>
        <cursor>
            <search text="db" index="2" />
        </cursor>
        <completions limit="3" strategy="TABLE_REF" symbol="NAME" relative="END_OF_SYMBOL" loc="31..33" text="db">
            <entry score="55" value="dbname" ntags="DATABASE_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" target_loc="31..33" target_text="db" qualified_loc="31..33" qualified_text="db">
                <object score="35" type="database" id="256" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" />
            </entry>
            <entry score="3" value="group" ctags="KEYWORD_VERY_POPULAR|EXPECTED_PARSER_SYMBOL" target_loc="31..33" target_text="db" qualified_loc="31..33" qualified_text="db" />
            <entry score="3" value="order" ctags="KEYWORD_VERY_POPULAR|EXPECTED_PARSER_SYMBOL" target_loc="31..33" target_text="db" qualified_loc="31..33" qualified_text="db" />
        </completions>
    </completion-snapshot>
    <!-- Complete schema name after "from sch" -->
    <completion-snapshot name="complete_schema_name">
        <catalog>
            <script id="1">
                <input>
                    create table dbname.schemaname.foo(a int);
                </input>
                <tables>
                    <table id="256.65536.4294967296" name="foo" loc="21..62" text="create tab..foo(a int)">
                        <column id="256.65536.4294967296.0" name="a" loc="56..61" text="a int" />
                    </table>
                </tables>
                <errors />
            </script>
        </catalog>
        <editor id="0">
            <input>
                select * from sch
            </input>
            <errors />
            <table-refs>
                <table-ref type="name/unresolved" stmt="0" loc="31..34" text="sch" />
            </table-refs>
        </editor>
        <cursor>
            <search text="sch" index="3" />
        </cursor>
        <completions limit="3" strategy="TABLE_REF" symbol="NAME" relative="END_OF_SYMBOL" loc="31..34" text="sch">
            <entry score="55" value="schemaname" ntags="SCHEMA_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" target_loc="31..34" target_text="sch" qualified_loc="31..34" qualified_text="sch">
                <object score="35" type="schema" id="256.65536" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" />
            </entry>
            <entry score="35" value="schema" ctags="KEYWORD_DEFAULT|EXPECTED_PARSER_SYMBOL|PREFIX_MATCH|SUBSTRING_MATCH" target_loc="31..34" target_text="sch" qualified_loc="31..34" qualified_text="sch" />
            <entry score="35" value="schemas" ctags="KEYWORD_DEFAULT|EXPECTED_PARSER_SYMBOL|PREFIX_MATCH|SUBSTRING_MATCH" target_loc="31..34" target_text="sch" qualified_loc="31..34" qualified_text="sch" />
        </completions>
    </completion-snapshot>
    <!-- Complete table name after "from fo" -->
    <completion-snapshot name="complete_table_name">
        <catalog>
            <script id="1">
                <input>
                    create table foo(a int);
                </input>
                <tables>
                    <table id="256.65536.4294967296" name="foo" loc="21..44" text="create tab..foo(a int)">
                        <column id="256.65536.4294967296.0" name="a" loc="38..43" text="a int" />
                    </table>
                </tables>
                <errors />
            </script>
        </catalog>
        <editor id="0">
            <input>
                select * from fo
            </input>
            <errors />
            <table-refs>
                <table-ref type="name/unresolved" stmt="0" loc="31..33" text="fo" />
            </table-refs>
        </editor>
        <cursor>
            <search text="fo" index="2" />
        </cursor>
        <completions limit="3" strategy="TABLE_REF" symbol="NAME" relative="END_OF_SYMBOL" loc="31..33" text="fo">
            <entry score="55" value="foo" ntags="TABLE_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" target_loc="31..33" target_text="fo" qualified_loc="31..33" qualified_text="fo">
                <object score="35" type="table" id="256.65536.4294967296" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" qualified="foo" qualified_idx="0" prefer_qualified="false" />
            </entry>
            <entry score="35" value="following" ctags="KEYWORD_DEFAULT|EXPECTED_PARSER_SYMBOL|PREFIX_MATCH|SUBSTRING_MATCH" target_loc="31..33" target_text="fo" qualified_loc="31..33" qualified_text="fo" />
            <entry score="35" value="for" ctags="KEYWORD_DEFAULT|EXPECTED_PARSER_SYMBOL|PREFIX_MATCH|SUBSTRING_MATCH" target_loc="31..33" target_text="fo" qualified_loc="31..33" qualified_text="fo" />
        </completions>
    </completion-snapshot>
    <!-- No table completion immediately after "from (" -->
    <completion-snapshot name="dont_complete_at_lrb">
        <catalog>
            <script id="1">
                <input>
                    create table foo(a int);
                </input>
                <tables>
                    <table id="256.65536.4294967296" name="foo" loc="21..44" text="create tab..foo(a int)">
                        <column id="256.65536.4294967296.0" name="a" loc="38..43" text="a int" />
                    </table>
                </tables>
                <errors />
            </script>
        </catalog>
        <editor id="0">
            <input>
                select * from ( foo );
            </input>
            <errors />
        </editor>
        <cursor>
            <search text="from (" index="6" />
        </cursor>
        <completions limit="3" strategy="DEFAULT" loc="31..32" text="(" />
    </completion-snapshot>
    <!-- Complete table name when column attr2 suggests table2 -->
    <completion-snapshot name="table_name_resolving_column">
        <catalog>
            <script id="1">
                <input>
create table table1(attr1 integer);
create table table2(attr2 integer);
create table table3(attr3 integer);
                </input>
                <tables>
                    <table id="256.65536.4294967296" name="table1" loc="1..35" text="create tab..1 integer)">
                        <column id="256.65536.4294967296.0" name="attr1" loc="21..34" text="attr1 integer" />
                    </table>
                    <table id="256.65536.4294967297" name="table2" loc="37..71" text="create tab..2 integer)">
                        <column id="256.65536.4294967297.0" name="attr2" loc="57..70" text="attr2 integer" />
                    </table>
                    <table id="256.65536.4294967298" name="table3" loc="73..107" text="create tab..3 integer)">
                        <column id="256.65536.4294967298.0" name="attr3" loc="93..106" text="attr3 integer" />
                    </table>
                </tables>
                <errors />
            </script>
        </catalog>
        <editor id="0">
            <input>
                select attr2 from tab
            </input>
            <errors />
            <table-refs>
                <table-ref type="name/unresolved" stmt="0" loc="35..38" text="tab" />
            </table-refs>
            <expressions>
                <expr id="0" type="colref/unresolved" stmt="0" loc="24..29" text="attr2" />
            </expressions>
        </editor>
        <cursor>
            <search text="tab" index="3" />
        </cursor>
        <completions limit="3" strategy="TABLE_REF" symbol="NAME" relative="END_OF_SYMBOL" loc="35..38" text="tab">
            <entry score="60" value="table2" ntags="TABLE_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|RESOLVING_TABLE|THROUGH_CATALOG" target_loc="35..38" target_text="tab" qualified_loc="35..38" qualified_text="tab">
                <object score="40" type="table" id="256.65536.4294967297" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|RESOLVING_TABLE|THROUGH_CATALOG" qualified="table2" qualified_idx="0" prefer_qualified="false" />
            </entry>
            <entry score="55" value="table1" ntags="TABLE_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" target_loc="35..38" target_text="tab" qualified_loc="35..38" qualified_text="tab">
                <object score="35" type="table" id="256.65536.4294967296" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" qualified="table1" qualified_idx="0" prefer_qualified="false" />
            </entry>
            <entry score="55" value="table3" ntags="TABLE_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" target_loc="35..38" target_text="tab" qualified_loc="35..38" qualified_text="tab">
                <object score="35" type="table" id="256.65536.4294967298" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" qualified="table3" qualified_idx="0" prefer_qualified="false" />
            </entry>
        </completions>
    </completion-snapshot>
    <!-- Complete with external name remapping (cursor script=1) -->
    <completion-snapshot name="remap_external_names">
        <catalog>
            <script id="1">
                <input>
                    create table external_name1(external_name2 int);
                </input>
                <tables>
                    <table id="256.65536.4294967296" name="external_name1" loc="21..68" text="create tab..name2 int)">
                        <column id="256.65536.4294967296.0" name="external_name2" loc="49..67" text="external_name2 int" />
                    </table>
                </tables>
                <errors />
            </script>
        </catalog>
        <editor id="0">
            <input>
                select external_name2 from external_name1 where external_
            </input>
            <errors />
            <table-refs>
                <table-ref type="name/catalog" id="256.65536.4294967296" stmt="0" loc="44..58" text="external_name1" />
            </table-refs>
            <expressions>
                <expr id="0" type="colref/catalog" catalog="256.65536.4294967296.0" stmt="0" loc="24..38" text="external_name2" />
                <expr id="1" type="colref/unresolved" stmt="0" loc="65..74" text="external_" />
            </expressions>
        </editor>
        <cursor script="1">
            <search text="where external_" index="14" />
        </cursor>
        <completions limit="5" strategy="COLUMN_REF" symbol="NAME" relative="MID_OF_SYMBOL" loc="65..74" text="external_">
            <entry score="65" value="external_name2" ntags="COLUMN_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG|IN_NAME_SCOPE" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_">
                <object score="45" type="column" id="256.65536.4294967296.0" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG|IN_NAME_SCOPE" qualified="external_name1.external_name2" qualified_idx="1" prefer_qualified="false" />
            </entry>
            <entry score="45" value="external_name1" ntags="TABLE_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_">
                <object score="35" type="table" id="256.65536.4294967296" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" qualified="external_name1" qualified_idx="0" prefer_qualified="false" />
            </entry>
            <entry score="35" value="external" ctags="KEYWORD_DEFAULT|EXPECTED_PARSER_SYMBOL|PREFIX_MATCH|SUBSTRING_MATCH" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_" />
            <entry score="3" value="group" ctags="KEYWORD_VERY_POPULAR|EXPECTED_PARSER_SYMBOL" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_" />
            <entry score="3" value="order" ctags="KEYWORD_VERY_POPULAR|EXPECTED_PARSER_SYMBOL" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_" />
        </completions>
    </completion-snapshot>
    <!-- Complete external name at EOF -->
    <completion-snapshot name="remap_external_names_eof">
        <catalog>
            <script id="1">
                <input>
                    create table external_name1(external_name2 int);
                </input>
                <tables>
                    <table id="256.65536.4294967296" name="external_name1" loc="21..68" text="create tab..name2 int)">
                        <column id="256.65536.4294967296.0" name="external_name2" loc="49..67" text="external_name2 int" />
                    </table>
                </tables>
                <errors />
            </script>
        </catalog>
        <editor id="0">
            <input>
                select external_name2 from external_name1 where external_
            </input>
            <errors />
            <table-refs>
                <table-ref type="name/catalog" id="256.65536.4294967296" stmt="0" loc="44..58" text="external_name1" />
            </table-refs>
            <expressions>
                <expr id="0" type="colref/catalog" catalog="256.65536.4294967296.0" stmt="0" loc="24..38" text="external_name2" />
                <expr id="1" type="colref/unresolved" stmt="0" loc="65..74" text="external_" />
            </expressions>
        </editor>
        <cursor>
            <search text="where external_" index="15" />
        </cursor>
        <completions limit="5" strategy="COLUMN_REF" symbol="NAME" relative="END_OF_SYMBOL" loc="65..74" text="external_">
            <entry score="65" value="external_name2" ntags="COLUMN_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG|IN_NAME_SCOPE" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_">
                <object score="45" type="column" id="256.65536.4294967296.0" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG|IN_NAME_SCOPE" qualified="external_name1.external_name2" qualified_idx="1" prefer_qualified="false" />
            </entry>
            <entry score="45" value="external_name1" ntags="TABLE_NAME" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_">
                <object score="35" type="table" id="256.65536.4294967296" ctags="NAME_INDEX|PREFIX_MATCH|SUBSTRING_MATCH|THROUGH_CATALOG" qualified="external_name1" qualified_idx="0" prefer_qualified="false" />
            </entry>
            <entry score="3" value="group" ctags="KEYWORD_VERY_POPULAR|EXPECTED_PARSER_SYMBOL" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_" />
            <entry score="3" value="order" ctags="KEYWORD_VERY_POPULAR|EXPECTED_PARSER_SYMBOL" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_" />
            <entry score="2" value="by" ctags="KEYWORD_POPULAR|EXPECTED_PARSER_SYMBOL" target_loc="65..74" target_text="external_" qualified_loc="65..74" qualified_text="external_" />
        </completions>
    </completion-snapshot>
</completion-snapshots>
