completion-snapshots:

  - name: dots_qualified_table
    catalog: {}
    editor:
      input: |-
        create table dbname.schemaname.foo(a int);
        select * from dbname.schemaname.
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..foo(a int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: a
              text: "a int"
      errors: []
      table-refs:
        - type: name/unresolved
          statement-id: 1
          text: "dbname.schemaname."
    cursor:
      search:
        text: from dbname.schemaname.
        index: 23
    completions:
      limit: 3
      strategy: TABLE_REF
      dot: 1
      symbol: OBJECT_EXT_TRAILING_DOT
      relative: END_OF_SYMBOL
      entries:
        - score: 22
          value: foo
          name-tags: [TABLE_NAME]
          candidate-tags: [DOT_RESOLUTION_TABLE]
          location: ""
          location-qualified: "dbname.schemaname."
          objects:
            - score: 2
              type: table
              id: "256.65536.0"
              candidate-tags: [DOT_RESOLUTION_TABLE]
              qualified: dbname.schemaname.foo
              qualified-idx: 2
              prefer-qualified: 0
      text: "."

  - name: dots_column_0
    catalog: {}
    editor:
      input: |-
        create table dbname.schemaname.foo(a int);
        select from dbname.schemaname.foo f where f.
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..foo(a int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: a
              text: "a int"
      errors: []
      table-refs:
        - type: name/internal
          catalog-id: "256.65536.0"
          statement-id: 1
          text: "dbname.sch..name.foo f"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 1
          text: "f."
    cursor:
      search:
        text: f.
        index: 2
    completions:
      limit: 3
      strategy: COLUMN_REF
      dot: 1
      symbol: OBJECT_EXT_TRAILING_DOT
      relative: END_OF_SYMBOL
      entries:
        - score: 22
          value: a
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.0"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.a
              qualified-idx: 1
              prefer-qualified: 1
      text: "."

  - name: dots_column_1
    catalog: {}
    editor:
      input: |-
        create table schemaname.foo(a int);
        select from schemaname.foo f where f.
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..foo(a int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: a
              text: "a int"
      errors: []
      table-refs:
        - type: name/internal
          catalog-id: "256.65536.0"
          statement-id: 1
          text: "schemaname.foo f"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 1
          text: "f."
    cursor:
      search:
        text: f.
        index: 2
    completions:
      limit: 3
      strategy: COLUMN_REF
      dot: 1
      symbol: OBJECT_EXT_TRAILING_DOT
      relative: END_OF_SYMBOL
      entries:
        - score: 22
          value: a
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.0"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.a
              qualified-idx: 1
              prefer-qualified: 1
      text: "."

  - name: dots_column_2
    catalog: {}
    editor:
      input: |-
        create table foo(a int);
        select from foo f where f.
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..foo(a int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: a
              text: "a int"
      errors: []
      table-refs:
        - type: name/internal
          catalog-id: "256.65536.0"
          statement-id: 1
          text: "foo f"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 1
          text: "f."
    cursor:
      search:
        text: f.
        index: 2
    completions:
      limit: 3
      strategy: COLUMN_REF
      dot: 1
      symbol: OBJECT_EXT_TRAILING_DOT
      relative: END_OF_SYMBOL
      entries:
        - score: 22
          value: a
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.0"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.a
              qualified-idx: 1
              prefer-qualified: 1
      text: "."

  - name: dots_multiple_columns_0
    catalog: {}
    editor:
      input: |-
        create table foo(a int, b int, c int);
        create table bar(d int, e int, f int);
        select from foo alias where alias.
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..nt, c int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: a
              text: "a int"
            - catalog-id: "256.65536.0.1"
              name: b
              text: "b int"
            - catalog-id: "256.65536.0.2"
              name: c
              text: "c int"
        - catalog-id: "256.65536.1"
          name: bar
          text: "create tab..nt, f int)"
          columns:
            - catalog-id: "256.65536.1.0"
              name: d
              text: "d int"
            - catalog-id: "256.65536.1.1"
              name: e
              text: "e int"
            - catalog-id: "256.65536.1.2"
              name: f
              text: "f int"
      errors: []
      table-refs:
        - type: name/internal
          catalog-id: "256.65536.0"
          statement-id: 2
          text: "foo alias"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 2
          text: "alias."
    cursor:
      search:
        text: alias.
        index: 6
    completions:
      limit: 3
      strategy: COLUMN_REF
      dot: 1
      symbol: OBJECT_EXT_TRAILING_DOT
      relative: END_OF_SYMBOL
      entries:
        - score: 22
          value: a
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "alias."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.0"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: alias.a
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: b
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "alias."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.1"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: alias.b
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: c
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "alias."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.2"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: alias.c
              qualified-idx: 1
              prefer-qualified: 1
      text: "."

  - name: dots_multiple_columns_1
    catalog: {}
    editor:
      input: |-
        create table foo(a int, b int, c int);
        create table bar(d int, e int, f int);
        select from foo f, bar b where f.
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..nt, c int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: a
              text: "a int"
            - catalog-id: "256.65536.0.1"
              name: b
              text: "b int"
            - catalog-id: "256.65536.0.2"
              name: c
              text: "c int"
        - catalog-id: "256.65536.1"
          name: bar
          text: "create tab..nt, f int)"
          columns:
            - catalog-id: "256.65536.1.0"
              name: d
              text: "d int"
            - catalog-id: "256.65536.1.1"
              name: e
              text: "e int"
            - catalog-id: "256.65536.1.2"
              name: f
              text: "f int"
      errors: []
      table-refs:
        - type: name/internal
          catalog-id: "256.65536.0"
          statement-id: 2
          text: "foo f"
        - type: name/internal
          catalog-id: "256.65536.1"
          statement-id: 2
          text: "bar b"
      expressions:
        - expression-idx: 0
          type: colref/internal
          catalog: "256.65536.1.2"
          statement-id: 2
          text: "f."
    cursor:
      search:
        text: f.
        index: 2
    completions:
      limit: 3
      strategy: COLUMN_REF
      dot: 1
      symbol: OBJECT_EXT_TRAILING_DOT
      relative: END_OF_SYMBOL
      entries:
        - score: 22
          value: a
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.0"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.a
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: b
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.1"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.b
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: c
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.2"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.c
              qualified-idx: 1
              prefer-qualified: 1
      text: "."

  - name: dots_multiple_columns_2
    catalog: {}
    editor:
      input: |-
        create table foo(a int, b int, c int);
        create table bar(d int, e int, f int);
        select from foo f, bar b where b.
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..nt, c int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: a
              text: "a int"
            - catalog-id: "256.65536.0.1"
              name: b
              text: "b int"
            - catalog-id: "256.65536.0.2"
              name: c
              text: "c int"
        - catalog-id: "256.65536.1"
          name: bar
          text: "create tab..nt, f int)"
          columns:
            - catalog-id: "256.65536.1.0"
              name: d
              text: "d int"
            - catalog-id: "256.65536.1.1"
              name: e
              text: "e int"
            - catalog-id: "256.65536.1.2"
              name: f
              text: "f int"
      errors: []
      table-refs:
        - type: name/internal
          catalog-id: "256.65536.0"
          statement-id: 2
          text: "foo f"
        - type: name/internal
          catalog-id: "256.65536.1"
          statement-id: 2
          text: "bar b"
      expressions:
        - expression-idx: 0
          type: colref/internal
          catalog: "256.65536.0.1"
          statement-id: 2
          text: "b."
    cursor:
      search:
        text: b.
        index: 2
    completions:
      limit: 3
      strategy: COLUMN_REF
      dot: 1
      symbol: OBJECT_EXT_TRAILING_DOT
      relative: END_OF_SYMBOL
      entries:
        - score: 22
          value: d
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "b."
          objects:
            - score: 2
              type: column
              id: "256.65536.1.0"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: b.d
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: e
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "b."
          objects:
            - score: 2
              type: column
              id: "256.65536.1.1"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: b.e
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: f
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "b."
          objects:
            - score: 2
              type: column
              id: "256.65536.1.2"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: b.f
              qualified-idx: 1
              prefer-qualified: 1
      text: "."

  - name: dots_limit
    catalog: {}
    editor:
      input: |-
        create table foo(a int, b int, c int, d int, e int);
        select from foo f where f.
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..nt, e int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: a
              text: "a int"
            - catalog-id: "256.65536.0.1"
              name: b
              text: "b int"
            - catalog-id: "256.65536.0.2"
              name: c
              text: "c int"
            - catalog-id: "256.65536.0.3"
              name: d
              text: "d int"
            - catalog-id: "256.65536.0.4"
              name: e
              text: "e int"
      errors: []
      table-refs:
        - type: name/internal
          catalog-id: "256.65536.0"
          statement-id: 1
          text: "foo f"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 1
          text: "f."
    cursor:
      search:
        text: f.
        index: 2
    completions:
      limit: 3
      strategy: COLUMN_REF
      dot: 1
      symbol: OBJECT_EXT_TRAILING_DOT
      relative: END_OF_SYMBOL
      entries:
        - score: 22
          value: a
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.0"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.a
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: b
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.1"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.b
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: c
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: ""
          location-qualified: "f."
          objects:
            - score: 2
              type: column
              id: "256.65536.0.2"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.c
              qualified-idx: 1
              prefer-qualified: 1
      text: "."

  - name: dots_score_column_prefix_0
    catalog: {}
    editor:
      input: |-
        create table foo(apple int, juice int);
        select from foo f where f.ap
      catalog-id: 0
      tables:
        - catalog-id: "256.65536.0"
          name: foo
          text: "create tab..juice int)"
          columns:
            - catalog-id: "256.65536.0.0"
              name: apple
              text: "apple int"
            - catalog-id: "256.65536.0.1"
              name: juice
              text: "juice int"
      errors: []
      table-refs:
        - type: name/internal
          catalog-id: "256.65536.0"
          statement-id: 1
          text: "foo f"
      expressions:
        - expression-idx: 0
          type: colref/unresolved
          statement-id: 1
          text: "f.ap"
    cursor:
      search:
        text: f.ap
        index: 4
    completions:
      limit: 3
      strategy: COLUMN_REF
      dot: 1
      symbol: NAME
      relative: END_OF_SYMBOL
      entries:
        - score: 57
          value: apple
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN,PREFIX_MATCH,SUBSTRING_MATCH]
          location: "ap"
          location-qualified: "f.ap"
          objects:
            - score: 37
              type: column
              id: "256.65536.0.0"
              candidate-tags: [DOT_RESOLUTION_COLUMN,PREFIX_MATCH,SUBSTRING_MATCH]
              qualified: f.apple
              qualified-idx: 1
              prefer-qualified: 1
        - score: 22
          value: juice
          name-tags: [COLUMN_NAME]
          candidate-tags: [DOT_RESOLUTION_COLUMN]
          location: "ap"
          location-qualified: "f.ap"
          objects:
            - score: 2
              type: column
              id: "256.65536.0.1"
              candidate-tags: [DOT_RESOLUTION_COLUMN]
              qualified: f.juice
              qualified-idx: 1
              prefer-qualified: 1
      text: "ap"
